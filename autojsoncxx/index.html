<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="automagically convert between JSON and C++">
  
  
  <title>autojsoncxx</title>
  

  <link rel="shortcut icon" href="./img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="./css/theme.css" type="text/css" />
  <link rel="stylesheet" href="./css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="./css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "None";
    var mkdocs_page_input_path = "index.md";
    var mkdocs_page_url = "/";
  </script>
  
  <script src="./js/jquery-2.1.1.min.js"></script>
  <script src="./js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="./js/highlight.pack.js"></script>
  <script src="./js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="." class="icon icon-home"> autojsoncxx</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href=".">Home</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#autojsoncxx">autojsoncxx</a></li>
                
                    <li><a class="toctree-l4" href="#overview">Overview</a></li>
                
                    <li><a class="toctree-l4" href="#features">Features</a></li>
                
                    <li><a class="toctree-l4" href="#testing">Testing</a></li>
                
                    <li><a class="toctree-l4" href="#quick-start">Quick start</a></li>
                
                    <li><a class="toctree-l4" href="#documentation">Documentation</a></li>
                
                    <li><a class="toctree-l4" href="#credit">Credit</a></li>
                
            
            </ul>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="tutorial/">Tutorial</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>User guide</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="user_guide/definition_file_syntax/">Definition file syntax</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="user_guide/error_handling/">Error handling</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="user_guide/miscellaneous/">Miscellaneous</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="user_guide/type_support/">Type support</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href=".">autojsoncxx</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".">Docs</a> &raquo;</li>
    
      
    
    <li>Home</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/netheril96/autojsoncxx" class="icon icon-github"> Edit on GitHub</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="autojsoncxx">autojsoncxx</h1>
<p>A header-only library and a code generator to <strong>automagically</strong> translate between <strong>JSON</strong> and <strong>C++</strong> types.</p>
<h2 id="overview">Overview</h2>
<p>JSON is a popular format for data exchange. Reading and writing JSON in C++, however, is nontrivial. Even with the help of libraries, one still needs to write lots of boilerplate code, and it is extremely hard to guard against all possible errors, since JSON is dynamically typed while C++ employs static typing.</p>
<p>More importantly, manually writing such code is a violation of <strong>DRY</strong> principle. When manually written, the class definition, parsing and serialization code can easily become out of sync, leading to brittle code and subtle bugs.</p>
<p><em>autojsoncxx</em> is an attempt to solve this problem by automating such process.</p>
<h3 id="dependency">Dependency</h3>
<ul>
<li><a href="https://github.com/miloyip/rapidjson">RapidJSON</a></li>
<li><a href="https://www.python.org">Python</a> (2.7 or 3.3+)</li>
<li>(optional) <a href="https://github.com/erikrose/parsimonious">Parsimonious</a></li>
<li>(optional) <a href="https://github.com/philsquared/Catch">Catch</a></li>
<li>(optional) <a href="http://www.boost.org">Boost</a></li>
</ul>
<h2 id="features">Features</h2>
<ul>
<li>The parsing/serializing code are <strong>automagically</strong> generated.</li>
<li><strong>Detailed error message</strong>. Unlike ordinary JSON libraries, <em>autojsoncxx</em> will detect not only invalid JSON errors, but also mismatch between JSON value and C++ type specification.</li>
<li><strong>Ease of use</strong>. A single function call is enough for most use cases. The library has no complicated build setup, since it's header only.</li>
<li><strong>Fast</strong>. Based on the streaming API of <code>rapidjson</code> and C++ templates, this library is efficient both in space and time.</li>
<li><strong>Flexible</strong>. Whenever the support of a certain class <code>Foo</code> is added to the library, all the combination of types, like <code>std::vector&lt;Foo&gt;</code>, <code>std::shared_ptr&lt;Foo&gt;</code>, <code>std::deque&lt;std::map&lt;std::string, Foo&gt;&gt;&gt;</code> is automatically supported as well, thanks to the use of template specialization.</li>
<li><strong>Liberal license</strong>. Both the library and its dependency are licensed liberally (MIT or BSD-like). Anyone is free to copy, distribute, modify or include in their own projects, be it open source or commercial.</li>
</ul>
<h2 id="testing">Testing</h2>
<p><a href="https://travis-ci.org/netheril96/autojsoncxx"><img alt="Build Status" src="https://travis-ci.org/netheril96/autojsoncxx.svg?branch=master" /></a></p>
<p>To build the test, you need a sufficiently new compiler because the goal is to test all the type support, including many ones only introduced in c++11.</p>
<p>First clone the repository, and pull the dependency</p>
<pre><code class="bash">git clone https://github.com/netheril96/autojsoncxx.git --recursive
</code></pre>

<p><em>UNIX/Linux/Mac users</em>:</p>
<pre><code class="bash">cmake .
make
make test
</code></pre>

<p><em>Windows users</em>:</p>
<p>Generate the <code>test/userdef.hpp</code> file from the definition <code>examples/userdef.json</code>. Then open the solution file under <code>test/mscvXX_test/</code> to build and run the test.</p>
<p>If too many tests fail, make sure your work directory points to the <code>test</code> directory.</p>
<h3 id="currently-tested-compilers">Currently tested compilers</h3>
<ul>
<li>Clang 3.4/3.5 on Mac OS X (11.9)</li>
<li>GCC 4.9 (Homebrew) on Mac OS X (11.9)</li>
<li>Clang 3.0 on Ubuntu 12.04 (x64)</li>
<li>GCC 4.8 on Ubuntu 14.04.1 (x86/x64)</li>
<li>MSVC 10 (x86) on Windows 7</li>
<li>MSVC 11/12 (x86/x64) on Windows 7</li>
</ul>
<h2 id="quick-start">Quick start</h2>
<p>The code generator reads a JSON file that defines the class structure. An example definition is like this</p>
<pre><code class="javascript">{
    &quot;name&quot;: &quot;Person&quot;,
    &quot;members&quot;:
    [
        [&quot;unsigned long long&quot;, &quot;ID&quot;, {&quot;required&quot;: true}],
        [&quot;std::string&quot;, &quot;name&quot;, {&quot;default&quot;: &quot;anonymous&quot;}],
        [&quot;double&quot;, &quot;height&quot;],
        [&quot;double&quot;, &quot;weight&quot;],
        [&quot;std::vector&lt;unsigned long long&gt;&quot;, &quot;known_associates&quot;]
    ]
}
</code></pre>

<p>Run the script <em>autojsoncxx.py</em> (requires Python 2.7+, including version 3+) on this definition file, and a header file will be generated. It includes a definition for <code>Person</code> as well as some helper classes.</p>
<pre><code class="bash">python autojsoncxx.py --input=persondef.json --output=person.hpp
</code></pre>

<h3 id="serialization">Serialization</h3>
<pre><code class="c++">Person p;
autojsoncxx::to_pretty_json_file(&quot;person.json&quot;, p);
autojsoncxx::to_json_file(stdout, p);
autojsoncxx::to_json_string(std::make_shared&lt;Person&gt;(p));
</code></pre>

<h3 id="parsing">Parsing</h3>
<pre><code class="c++">autojsoncxx::ParsingResult result;
Person p;
if (!autojsoncxx::from_json_file(&quot;person.json&quot;, p, result)) {
    std::cerr &lt;&lt; result &lt;&lt; '\n';
    return -1;
}
</code></pre>

<h3 id="error-handling">Error handling</h3>
<p>If the JSON file is malformed, any decent JSON library will detect it and tell you what goes wrong. But what if the JSON value is perfectly valid, but not laid out the way you expected? Usually you have to manually check the DOM tree against your specification, but this library will automatically generates the necessary code.</p>
<p>Here is valid JSON file</p>
<pre><code class="javascript">{
    &quot;name&quot;: &quot;Mike&quot;,
    &quot;ID&quot;: 8940220481904,
    &quot;height&quot;: 1.77,
    &quot;weight&quot;: 70.0,
    &quot;known_associates&quot;: [
        &quot;Jack&quot;, &quot;Mary&quot;
    ]
}
</code></pre>

<p>Running through the parsing code, and you will get an error output:</p>
<pre><code>Parsing failed at offset 127 with error code 16:
Terminate parsing due to Handler error.

Trace back (last call first):
(*) Type mismatch between expected type &quot;uint64_t&quot; and actual type &quot;string&quot;
(*) Error at array element with index 0
(*) Error at object member with name &quot;known_associates&quot;
</code></pre>

<p>One can also <a href="https://netheril96.github.io/autojsoncxx/user_guide/error_handling/">query the errors programmingly</a>.</p>
<h2 id="documentation">Documentation</h2>
<p>Read more <a href="https://netheril96.github.io/autojsoncxx/tutorial">here</a>.</p>
<h2 id="credit">Credit</h2>
<p>This project is inspired by <a href="https://developers.google.com/protocol-buffers/">google protobuf</a>. It adopts the same approach in protobuf (compiler + definition file), and borrows various parse options from it.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="tutorial/" class="btn btn-neutral float-right" title="Tutorial">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/netheril96/autojsoncxx" class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
      
        <span style="margin-left: 15px"><a href="tutorial/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>

<!--
MkDocs version : 0.15.3
Build Date UTC : 2016-07-19 01:47:07.497904
-->
